{"version":3,"file":"commonHelpers.js","sources":["../src/js/formSrc/button.js","../src/js/gallerySrc/createGalery.js","../src/js/izitoast.js","../src/js/loader.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const button = {\n\n    _button: document.querySelector('.form-button'),\n\n    active() {\n        this._button.disabled = false\n        this._button.classList.add('active')\n    },\n\n    disable() {\n        this._button.disabled = true;\n        this._button.classList.remove('active');\n    }\n}","export function createGaleryItems(imagesInfo) {\n  return imagesInfo.reduce((htmlMarcup, el) => {\n    return (htmlMarcup += `\n      <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${el.webformatURL}\"\n          width=\"360\" heihgt=\"200\"\n          alt=\"${el.tags}\"/>\n          </a>\n          <ul class=\"galery-descriptions\">\n            <li class=\"galery-descriptions-item\">\n              <span class=\"galery-descriptions-title\">likes</span>\n              <span>${el.likes}</span>\n            </li>\n            <li class=\"galery-descriptions-item\">\n            <span class=\"galery-descriptions-title\">views </span>\n            <span>${el.views}</span>\n            </li>\n            <li class=\"galery-descriptions-item\">\n            <span class=\"galery-descriptions-title\">comments </span>\n            <span>${el.comments}</span>\n            </li>\n            <li class=\"galery-descriptions-item\">\n              <span class=\"galery-descriptions-title\"> downloads </span>\n              <span>${el.downloads}</span>\n            </li>\n          </ul>\n        </li>\n      `);\n  }, '');\n}","import iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const showModalMsg = (text, color = \"red\") => {\n    iziToast.show({\n      message: text,\n      messageColor: 'white',\n      messageSize: '26',\n      messageLineHeight: '',\n      backgroundColor: '',\n      color: color, // blue, red, green, yellow\n      close: true,\n      closeOnEscape: true,\n      closeOnClick: true,\n      position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center\n      timeout: 4000,\n    });\n}","\n\nexport const loader = {\n  loader: document.querySelector('.loader-wraper'),\n\n  show() {\n    this.loader.classList.remove('hiden');\n  },\n\n  close() {\n    this.loader.classList.add('hiden');\n  },\n};","import axios from \"axios\";\n\n\nconst URL = 'https://pixabay.com/api/?';\nconst KEY = '37903725-9b007c08cd936d7b1a7a439ee';\nconst per_page = 15;\n\nexport const getImg = async (serchText, serchCategory, page = 1) => {\n\n    const params = {\n      key: KEY,\n      q: serchText,\n      image_type: 'photo',\n      category: serchCategory,\n      orientation: 'horizontal',\n      safesearch: 'false',\n      page: page,\n      per_page,\n    };\n\n    return await axios.get(URL, {params})\n\n}\n","import simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallerySimpleLightBox = new simpleLightbox('.gallery a', {\n        captions: true,\n        captionsData: 'alt',\n        captionPosition: 'bottom',\n        captionDelay: 250,\n    })\n\nexport const gallery = {\n    galleryEl: document.querySelector('.gallery'),\n\n    clear() {\n        this.galleryEl.innerHTML = ''\n        gallerySimpleLightBox.refresh()\n    },\n\n    addItems(items) {\n        this.galleryEl.insertAdjacentHTML('beforeend', items);\n        gallerySimpleLightBox.refresh();\n    }\n}\n\n","import { button } from \"./js/formSrc/button.js\";\nimport { createGaleryItems } from \"./js/gallerySrc/createGalery\";\nimport { showModalMsg } from \"./js/izitoast\";\nimport { loader } from \"./js/loader\";\nimport { getImg } from \"./js/pixabay-api\";\nimport { gallery } from \"./js/render-functions\";\n\n// page element\nconst formEl = document.querySelector('.search-form');\nconst btnLoadMore = document.querySelector('#load-more')\nconst btnLoadMoreWraper = document.querySelector('.button-wrapper');\nconst endCollectionsMessage = document.querySelector('.end-colections-message')\n\n// main variables\nlet curentPage = 1\nlet pageCount = 0\nlet serchTxt = '' \nlet serchCategory = '';\n\nformEl.addEventListener('submit', submitForm);\nformEl.addEventListener('input', inputForm);\nbtnLoadMore.addEventListener('click', loadMore);\n\n\nfunction inputForm(form) {\n\n    if (form.currentTarget.elements.searchText.value.length > 0) {\n        button.active()\n        return\n    }\n    button.disable()\n}\n\nfunction submitForm(form) {\n\n    // get serch info from form\n    form.preventDefault()\n    endCollectionsMessage.classList.add('hiden');\n    serchTxt = form.currentTarget.elements.searchText.value.trim();\n    serchCategory = form.currentTarget.elements.category.value\n    \n    // data verification\n    if (serchTxt.length < 2) {\n        showModalMsg('the search word must contain at least 2 letters', 'red');\n        form.currentTarget.reset();\n        return\n    }\n\n    loader.show()\n    gallery.clear()\n\n    // fetching data from server\n    getImg(serchTxt, serchCategory)\n      .then(res => {\n        if (res.data.hits.length === 0) {\n          showModalMsg(\n            'Sorry, there are no images matching your search query. Please try again!'\n          );\n          pageCount = 0;\n          btnLoadMoreWraper.classList.add('hiden');\n          endCollectionsMessage.classList.add('hiden');\n          return;\n        }\n\n        pageCount = Math.ceil(res.data.totalHits / 15)\n        gallery.addItems(createGaleryItems(res.data.hits));\n        if (curentPage === pageCount) endCollectionsMessage.classList.remove('hiden');\n      })\n      .catch(err => {\n        showModalMsg('error ' + err);\n        return;\n      })\n      .finally(() => {\n        loader.close();\n        if (curentPage < pageCount) {\n          btnLoadMoreWraper.classList.remove('hiden');\n        };\n        form.target.reset();\n      });\n    \n}\n\nfunction loadMore(btn) {\n\n    curentPage += 1\n  \n    // fetching data from server\n    btnLoadMoreWraper.classList.add('hiden');\n    loader.show();\n  getImg(serchTxt, serchCategory, curentPage)\n    .then(res => {\n      if (res.data.hits.length === 0) {\n        showModalMsg(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n        return;\n      }\n\n      gallery.addItems(createGaleryItems(res.data.hits));\n      const scrollHeight = document.querySelector('.gallery-item').clientHeight;\n      window.scrollBy({\n        top: scrollHeight * 2,\n        behavior: 'smooth',\n      });\n    })\n    .catch(err => {\n      showModalMsg('error ' + err);\n      return;\n    })\n    .finally(() => {\n      loader.close();\n      if ( curentPage < pageCount ) btnLoadMoreWraper.classList.remove('hiden'); else endCollectionsMessage.classList.remove('hiden');\n    });\n}\n"],"names":["button","createGaleryItems","imagesInfo","htmlMarcup","el","showModalMsg","text","color","iziToast","loader","URL","KEY","per_page","getImg","serchText","serchCategory","page","params","axios","gallerySimpleLightBox","simpleLightbox","gallery","items","formEl","btnLoadMore","btnLoadMoreWraper","endCollectionsMessage","curentPage","pageCount","serchTxt","submitForm","inputForm","loadMore","form","res","err","btn","scrollHeight"],"mappings":"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"}